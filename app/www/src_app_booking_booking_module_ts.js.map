{"version":3,"file":"src_app_booking_booking_module_ts.js","mappings":"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","sources":["./src/app/booking/booking.module.ts","./src/app/booking/book/book.component.ts","./src/app/booking/booking.router.module.ts","./src/app/booking/book/book.component.css"],"sourcesContent":["/* eslint-disable max-len */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CookieModule } from 'ngx-cookie';\n\nimport { BookComponent } from './book/book.component';\n\nimport { GodigitalbModule } from 'godigital-lib';\n\nimport { BookingRoutingModule } from './booking.router.module';\n\n@NgModule({\n  declarations: [BookComponent],\n  imports: [\n    CommonModule,\n    IonicModule,\n    BookingRoutingModule,\n    FormsModule, ReactiveFormsModule,\n    CookieModule.forRoot(),\n    GodigitalbModule,\n  ],\n  providers:[]\n})\nexport class BookingModule { }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\n\ntype EventValue = 'sunset' | 'lerins' | 'afterwork' | 'night' | 'business' | 'evjf' | 'other';\n\n@Component({\n  selector: 'app-book',\n  templateUrl: './book.component.html',\n  styleUrls: ['./book.component.css']\n})\nexport class BookComponent implements OnInit {\n  @Input() presetEvent: EventValue | null = null;         // optionally preselect (e.g. from /book/sunset)\n  @Input() presetDate: string | null = null;               // YYYY-MM-DD\n  @Input() user?: { firstName?: string; lastName?: string; email?: string; phone?: string; uid?: string };\n\n  form: FormGroup;\n  submitting = false;\n  ok = false;\n  error = '';\n\n  eventTypes = [\n    { value: 'sunset',   label: 'Sunset Cruise & Champagne' },\n    { value: 'lerins',   label: 'Day Escape – Lérins Islands' },\n    { value: 'afterwork',label: 'Afterwork en mer' },\n    { value: 'night',    label: 'Night on Board' },\n    { value: 'business', label: 'Business Meeting' },\n    { value: 'evjf',     label: 'EVJF / EVG' }\n  ];\n\n  durations = ['2h', '2h30', '3h', '4h', '8h', 'Overnight'];\n\n  services = [\n    { key: 'food',        label: 'Food & snacks',         icon: 'bi bi-egg-fried' },\n    { key: 'champagne',   label: 'Champagne / wine',      icon: 'bi bi-champagne' },\n    { key: 'yoga',        label: 'Yoga session',          icon: 'bi bi-heart-pulse' },\n    { key: 'photography', label: 'Photographer/Video',    icon: 'bi bi-camera' },\n    { key: 'dj',          label: 'Live DJ / Musician',    icon: 'bi bi-music-note-beamed' },\n    { key: 'transfers',   label: 'Guest transfers',       icon: 'bi bi-taxi-front' }\n  ];\n\n  estimateFrom = 280; // base “from” price (you can refine based on event/duration)\n\n  get collectContact(): boolean {\n    // if no user passed in, collect contact details\n    return !this.user?.email;\n  }\n\n  constructor(private fb: FormBuilder) {\n    this.form = this.fb.group({\n      eventType: ['', Validators.required],\n      eventTypeOther: [''],\n      date: ['', Validators.required],\n      time: ['18:00'],\n      duration: ['2h', Validators.required],\n      people: [2, [Validators.required, Validators.min(1), Validators.max(12)]],\n      groupNote: [''],\n\n      specialServices: this.fb.nonNullable.group({\n        food: false,\n        champagne: false,\n        yoga: false,\n        photography: false,\n        dj: false,\n        transfers: false\n      }),\n      servicesNote: [''],\n\n      comments: [''],\n\n      // contact for guests\n      firstName: [''],\n      lastName: [''],\n      email: ['', [Validators.email]],\n      phone: ['']\n    });\n  }\n\n  ngOnInit(): void {\n    if (this.presetEvent) {\n      this.form.patchValue({ eventType: this.presetEvent });\n    }\n    if (this.presetDate) {\n      this.form.patchValue({ date: this.presetDate });\n    }\n    if (this.user?.email) {\n      this.form.patchValue({\n        firstName: this.user.firstName || '',\n        lastName: this.user.lastName || '',\n        email: this.user.email || '',\n        phone: this.user.phone || ''\n      });\n    }\n\n    // dynamic validation for “other”\n    this.form.get('eventType')!.valueChanges.subscribe(v => {\n      const ctrl = this.form.get('eventTypeOther')!;\n      if (v === 'other') {\n        ctrl.addValidators([Validators.required, Validators.minLength(3)]);\n      } else {\n        ctrl.clearValidators();\n        ctrl.setValue('');\n      }\n      ctrl.updateValueAndValidity({ emitEvent: false });\n      this.updateEstimate();\n    });\n\n    // update estimate when key fields change\n    this.form.valueChanges.subscribe(() => this.updateEstimate());\n    this.updateEstimate();\n  }\n\n  get selectedServiceLabels(): string[] {\n    const s = this.form.value.specialServices || {};\n    return this.services.filter(x => s[x.key]).map(x => x.label);\n  }\n\n  toggleService(key: string, checked: boolean) {\n    const group = this.form.get('specialServices') as FormGroup;\n    group.get(key)?.setValue(checked);\n    this.updateEstimate();\n  }\n\n  displayEventType(val: string, other: string) {\n    if (val === 'other') return other || 'Custom request';\n    const f = this.eventTypes.find(e => e.value === val);\n    return f ? f.label : '—';\n  }\n\n  showError(name: string): boolean {\n    const c = this.form.get(name);\n    return !!(c && c.invalid && (c.dirty || c.touched));\n    }\n\n  private updateEstimate() {\n    // Simple example: adjust base by event & duration & group size & options\n    const { eventType, duration, people, specialServices } = this.form.value;\n\n    let base = 0;\n    switch (eventType as EventValue) {\n      case 'sunset': base = 320; break;\n      case 'afterwork': base = 300; break;\n      case 'lerins': base = 540; break;\n      case 'night': base = 280; break;\n      case 'business': base = 240; break;\n      case 'evjf': base = 400; break;\n      default: base = 300;\n    }\n\n    // duration bump\n    if (duration === '3h') base += 60;\n    if (duration === '4h') base += 160;\n    if (duration === '8h') base += 300;\n    if (duration === 'Overnight') base = Math.max(base, 360);\n\n    // group size bump (very rough)\n    if (people > 6) base += 15 * (people - 6);\n\n    // options bump (very rough)\n    if (specialServices?.champagne) base += 50;\n    if (specialServices?.food) base += 40;\n    if (specialServices?.yoga) base += 60;\n    if (specialServices?.photography) base += 80;\n    if (specialServices?.dj) base += 120;\n    if (specialServices?.transfers) base += 40;\n\n    this.estimateFrom = Math.max(200, Math.round(base));\n  }\n\n  async submit() {\n    this.error = '';\n    this.ok = false;\n\n    // Force validation for guest contact\n    if (this.collectContact) {\n      this.form.get('firstName')?.addValidators([Validators.required]);\n      this.form.get('lastName')?.addValidators([Validators.required]);\n      this.form.get('email')?.addValidators([Validators.required, Validators.email]);\n      this.form.get('firstName')?.updateValueAndValidity();\n      this.form.get('lastName')?.updateValueAndValidity();\n      this.form.get('email')?.updateValueAndValidity();\n    }\n\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n\n    const payload = {\n      ...this.form.value,\n      eventTypeResolved: this.displayEventType(this.form.value.eventType, this.form.value.eventTypeOther),\n      estimateFrom: this.estimateFrom,\n      userId: this.user?.uid || null,\n      createdTS: Date.now(),\n    };\n\n    try {\n      this.submitting = true;\n\n      // TODO: call your backend / Firebase callable here\n      // await this.http.post('/api/bookings', payload).toPromise();\n\n      await new Promise(r => setTimeout(r, 800)); // demo\n      this.ok = true;\n      this.form.markAsPristine();\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    } catch (e: any) {\n      this.error = e?.message || 'Failed to send your request.';\n    } finally {\n      this.submitting = false;\n    }\n  }\n}\n","\n\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { BookComponent } from './book/book.component';\n\nconst routes: Routes = [\n  { path: 'book', component: BookComponent },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class BookingRoutingModule { }\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.book-hero {\n  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.35)),\n              url('/assets/img/home/hero.jpg') center/cover no-repeat;\n}\n\n.card .form-text { color: #6b7280; }\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/booking/book/book.component.css\"],\"names\":[],\"mappings\":\"AAAA;EACE;qEACmE;AACrE;;AAEA,mBAAmB,cAAc,EAAE\",\"sourcesContent\":[\".book-hero {\\n  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.35)),\\n              url('/assets/img/home/hero.jpg') center/cover no-repeat;\\n}\\n\\n.card .form-text { color: #6b7280; }\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","CommonModule","IonicModule","FormsModule","ReactiveFormsModule","CookieModule","BookComponent","GodigitalbModule","BookingRoutingModule","BookingModule","__decorate","declarations","imports","forRoot","providers","Component","Input","FormBuilder","Validators","fb","presetEvent","presetDate","user","form","submitting","ok","error","eventTypes","value","label","durations","services","key","icon","estimateFrom","collectContact","email","constructor","group","eventType","required","eventTypeOther","date","time","duration","people","min","max","groupNote","specialServices","nonNullable","food","champagne","yoga","photography","dj","transfers","servicesNote","comments","firstName","lastName","phone","ngOnInit","patchValue","get","valueChanges","subscribe","v","ctrl","addValidators","minLength","clearValidators","setValue","updateValueAndValidity","emitEvent","updateEstimate","selectedServiceLabels","s","filter","x","map","toggleService","checked","displayEventType","val","other","f","find","e","showError","name","c","invalid","dirty","touched","base","Math","round","submit","_this","_asyncToGenerator","markAllAsTouched","payload","eventTypeResolved","userId","uid","createdTS","Date","now","Promise","r","setTimeout","markAsPristine","window","scrollTo","top","behavior","message","selector","template","__NG_CLI_RESOURCE__0","RouterModule","routes","path","component","forChild","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}