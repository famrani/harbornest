{"version":3,"sources":["../src/app/services/recaptcha.ts"],"names":[],"mappings":";;AAAA,0CAeC;AAfM,KAAK,UAAU,eAAe,CAAC,KAAc;IAClD,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC;IAChD,IAAI,CAAC,MAAM;QAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,WAAW;IAEvD,MAAM,MAAM,GAAG,IAAI,eAAe,EAAE,CAAC;IACrC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IAChC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,KAAK,IAAI,EAAE,CAAC,CAAC;IAEvC,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,iDAAiD,EAAE;QAC1E,MAAM,EAAE,MAAM;QACd,IAAI,EAAE,MAAM;KACb,CAAC,CAAC;IACH,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,EAAgE,CAAC;IAE7F,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC;AAC9D,CAAC","file":"recaptcha.js","sourcesContent":["export async function verifyRecaptcha(token?: string) {\n  const secret = process.env.RECAPTCHA_SECRET_KEY;\n  if (!secret) return { ok: true, score: 1 }; // disabled\n\n  const params = new URLSearchParams();\n  params.append('secret', secret);\n  params.append('response', token || '');\n\n  const resp = await fetch('https://www.google.com/recaptcha/api/siteverify', {\n    method: 'POST',\n    body: params,\n  });\n  const data = await resp.json() as { success: boolean; score?: number; [k: string]: unknown };\n\n  return { ok: !!data.success, score: data.score ?? 0, data };\n}\n"]}